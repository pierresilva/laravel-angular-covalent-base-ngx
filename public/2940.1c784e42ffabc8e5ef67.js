(self.webpackChunkngxcovalent=self.webpackChunkngxcovalent||[]).push([[2940],{12073:(e,t,n)=>{"use strict";n.d(t,{l:()=>N});var s=n(37716),i=n(3679),r=n(54395),o=n(68307),a=n(43190),l=n(68939),u=n(91841),c=n(84962),d=n(38583),m=n(58341),h=n(98295),g=n(49983),p=n(21554),_=n(76627),f=n(72458),U=n(51095),Z=n(63423),v=n(92859),x=n(29790);function b(e,t){1&e&&(s.ynx(0),s._uU(1," *"),s.BQk())}function I(e,t){if(1&e&&(s.TgZ(0,"h4"),s._uU(1),s.YNc(2,b,2,0,"ng-container",0),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.label),s.xp6(1),s.Q6J("ngIf",e.min)}}function T(e,t){if(1&e&&(s.ynx(0),s._uU(1,"\n      "),s.TgZ(2,"span"),s.TgZ(3,"b"),s._uU(4),s.qZA(),s.qZA(),s._uU(5,"\n    "),s.BQk()),2&e){const e=t.$implicit,n=s.oxw().$implicit;s.xp6(4),s.Oqu(n[e])}}function q(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-chip",9),s.NdJ("removed",function(){const t=s.CHM(e).$implicit;return s.oxw().removeItem(t)}),s._uU(1,"\n    "),s.YNc(2,T,6,1,"ng-container",10),s._uU(3,"\n    "),s._UZ(4,"span",11),s._uU(5,"\n    "),s.TgZ(6,"button",12),s._uU(7,"\n      "),s.TgZ(8,"mat-icon"),s._uU(9,"cancel"),s.qZA(),s._uU(10,"\n    "),s.qZA(),s._uU(11,"\n  "),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("removable",!0),s.xp6(2),s.Q6J("ngForOf",e.searchDisplayColumns)}}function A(e,t){if(1&e&&(s.TgZ(0,"mat-option",13),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.hij("",e.loadingText,"\n    ")}}function C(e,t){if(1&e&&(s.ynx(0),s._uU(1,"\n          "),s.TgZ(2,"span"),s.TgZ(3,"b"),s._uU(4),s.qZA(),s.qZA(),s._uU(5,"\n        "),s.BQk()),2&e){const e=t.$implicit,n=s.oxw().$implicit;s.xp6(4),s.Oqu(n[e])}}function M(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-option",15),s.NdJ("onSelectionChange",function(){const t=s.CHM(e).$implicit;return s.oxw(2).addItem(t)}),s._uU(1,"\n        "),s.YNc(2,C,6,1,"ng-container",10),s._uU(3,"\n\n      "),s.qZA()}if(2&e){const e=t.$implicit,n=s.oxw(2);s.Q6J("value",e.id),s.xp6(2),s.Q6J("ngForOf",n.searchDisplayColumns)}}function y(e,t){if(1&e&&(s.ynx(0),s._uU(1,"\n      "),s.YNc(2,M,4,2,"mat-option",14),s._uU(3,"\n    "),s.BQk()),2&e){const e=s.oxw();s.xp6(2),s.Q6J("ngForOf",e.filteredData)}}function S(e,t){if(1&e&&(s.ynx(0),s._uU(1,"\n              "),s.TgZ(2,"a",17),s._uU(3),s.qZA(),s._uU(4,"\n            "),s.BQk()),2&e){const e=s.oxw(2);s.xp6(2),s.Q6J("routerLink",e.notFoundUrl),s.xp6(1),s.Oqu(e.notFoundButtonText)}}function J(e,t){if(1&e&&(s.ynx(0),s._uU(1,"\n      "),s.TgZ(2,"mat-option",16),s._uU(3,"\n          "),s.TgZ(4,"span"),s._uU(5,"\n            "),s.TgZ(6,"b"),s._uU(7),s.qZA(),s._uU(8,"\n            "),s.YNc(9,S,5,2,"ng-container",0),s._uU(10,"\n          "),s.qZA(),s._uU(11,"\n      "),s.qZA(),s._uU(12,"\n    "),s.BQk()),2&e){const e=s.oxw();s.xp6(2),s.Q6J("value",null),s.xp6(5),s.Oqu(e.notFoundMessage),s.xp6(2),s.Q6J("ngIf",e.notFoundUrl&&e.notFoundButtonText)}}function w(e,t){if(1&e&&(s.TgZ(0,"mat-hint",18),s._uU(1,"\n    "),s.TgZ(2,"span",19),s._uU(3,"Assign at less"),s.qZA(),s._uU(4),s.TgZ(5,"span"),s._uU(6),s.qZA(),s._uU(7,"\n  "),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.hij(" ",e.min," "),s.xp6(2),s.Oqu(e.label)}}function O(e,t){if(1&e&&(s.TgZ(0,"mat-hint",18),s._uU(1,"\n    "),s.TgZ(2,"span",19),s._uU(3,"Assign a maximum"),s.qZA(),s._uU(4),s.TgZ(5,"span"),s._uU(6),s.qZA(),s._uU(7,"\n  "),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.hij(" ",e.max," "),s.xp6(2),s.Oqu(e.label)}}let N=(()=>{class e{constructor(e,t){this.http=e,this.snackBar=t,this.selected=[],this.selectedIds=[],this.searchUrl=null,this.searchColumns=["name"],this.searchDisplayColumns=["name"],this.searchInputLabel="Buscar item",this.searchInputPlaceholder="Buscar...",this.notFoundMessage="No items found",this.notFoundButtonText=null,this.notFoundUrl=null,this.loadingText="Buscando...",this.required=!1,this.label=null,this.min=null,this.max=null,this.selectOut=new s.vpe,this.selectIdsOut=new s.vpe,this.searchInput=new i.NI,this.searchString="",this.filteredData=[],this.isLoading=!1,this.errorMessage=""}ngOnInit(){this.filterData()}getSearchString(e){let t=[];return this.searchColumns.map(n=>{t.push({column:n,operator:"cont",text:e})}),"&query="+JSON.stringify(t)}filterData(){this.searchInput.valueChanges.pipe((0,r.b)(500),(0,o.b)(()=>{this.errorMessage="",this.filteredData=[],this.isLoading=!0}),(0,a.w)(e=>this.http.get(this.searchUrl+"?per_page=100"+this.getSearchString(e)).pipe((0,l.x)(()=>{this.isLoading=!1})))).subscribe(e=>{null==e.data?(this.errorMessage=e.message,this.filteredData=[]):(this.errorMessage="",this.filteredData=e.data)})}addItem(e){var t,n,s;let i=!1;if(this.selected)for(let r=0;r<(null===(t=this.selected)||void 0===t?void 0:t.length);r++)this.selected[r].id===e.id&&(i=!0);this.searchInput.setValue(""),this.max&&this.selected.length>=this.max?this.snackBar.openSnackBar("Solo puedes agregar "+this.max+" items","OK"):i||(null===(n=this.selectedIds)||void 0===n||n.push(e.id),null===(s=this.selected)||void 0===s||s.push(e),this.selectOut.emit(this.selected),this.selectIdsOut.emit(this.selectedIds))}removeItem(e){var t;null===(t=this.selected)||void 0===t||t.map((t,n)=>{t.id===e.id&&this.selected.splice(n,1)}),this.selectedIds.map((t,n)=>{t==e.id&&this.selectedIds.splice(n,1)}),this.selectOut.emit(this.selected),this.selectIdsOut.emit(this.selectedIds)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(u.eN),s.Y36(c.c))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-belongs-to-many-input"]],inputs:{selected:"selected",selectedIds:"selectedIds",searchUrl:"searchUrl",searchColumns:"searchColumns",searchDisplayColumns:"searchDisplayColumns",searchInputLabel:"searchInputLabel",searchInputPlaceholder:"searchInputPlaceholder",notFoundMessage:"notFoundMessage",notFoundButtonText:"notFoundButtonText",notFoundUrl:"notFoundUrl",loadingText:"loadingText",required:"required",label:"label",min:"min",max:"max"},outputs:{selectOut:"selectOut",selectIdsOut:"selectIdsOut"},decls:30,vars:11,consts:[[4,"ngIf"],[1,"mat-chip-list-stacked"],[3,"removable","removed",4,"ngFor","ngForOf"],["appearance","outline",2,"width","100%","margin-top","0.5rem"],["matInput","",3,"formControl","placeholder","matAutocomplete"],["dataSearch",""],["autocompleteTags","matAutocomplete"],["class","is-loading",4,"ngIf"],["style","color: red;",4,"ngIf"],[3,"removable","removed"],[4,"ngFor","ngForOf"],["flex",""],["matChipRemove",""],[1,"is-loading"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[3,"value","onSelectionChange"],[3,"value"],["mat-button","",3,"routerLink"],[2,"color","red"],["translate",""]],template:function(e,t){if(1&e&&(s.YNc(0,I,3,2,"h4",0),s._uU(1,"\n"),s.TgZ(2,"mat-chip-list",1),s._uU(3,"\n  "),s.YNc(4,q,12,2,"mat-chip",2),s._uU(5,"\n"),s.qZA(),s._uU(6,"\n"),s.TgZ(7,"mat-form-field",3),s._uU(8,"\n  "),s.TgZ(9,"mat-label"),s._uU(10),s.qZA(),s._uU(11,"\n  "),s._UZ(12,"input",4,5),s._uU(14,"\n  "),s.TgZ(15,"mat-autocomplete",null,6),s._uU(17,"\n    "),s.YNc(18,A,2,1,"mat-option",7),s._uU(19,"\n    "),s.YNc(20,y,4,1,"ng-container",0),s._uU(21,"\n    "),s.YNc(22,J,13,3,"ng-container",0),s._uU(23,"\n  "),s.qZA(),s._uU(24,"\n  "),s.YNc(25,w,8,2,"mat-hint",8),s._uU(26,"\n  "),s.YNc(27,O,8,2,"mat-hint",8),s._uU(28,"\n"),s.qZA(),s._uU(29,"\n\n")),2&e){const e=s.MAs(16);s.Q6J("ngIf",t.label),s.xp6(4),s.Q6J("ngForOf",t.selected),s.xp6(6),s.Oqu(t.searchInputLabel),s.xp6(2),s.Q6J("formControl",t.searchInput)("placeholder",t.searchInputPlaceholder)("matAutocomplete",e),s.xp6(6),s.Q6J("ngIf",t.isLoading),s.xp6(2),s.Q6J("ngIf",!t.isLoading&&t.filteredData.length),s.xp6(2),s.Q6J("ngIf",!t.isLoading&&!t.filteredData.length),s.xp6(3),s.Q6J("ngIf",t.min&&t.selected.length<t.min),s.xp6(2),s.Q6J("ngIf",t.max&&t.selected.length>t.max)}},directives:[d.O5,m.qn,d.sg,h.KE,h.hX,g.Nt,i.Fj,p.ZL,i.JJ,i.oH,p.XC,m.HS,m.qH,_.Hw,f.ey,U.zs,Z.yS,v.YI,h.bx,x.Pi],styles:["h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem}"]}),e})()},32940:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UsersModule:()=>de});var s=n(38583),i=n(63423),r=n(37716);let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-users"]],decls:2,vars:0,template:function(e,t){1&e&&(r._UZ(0,"router-outlet"),r._uU(1,"\n"))},directives:[i.lC],styles:[""]}),e})();var a=n(50926),l=n(50115),u=n(89332),c=n(84962),d=n(48487),m=n(78739);let h=(()=>{class e{constructor(e,t,n,s,i){this.api=e,this.router=t,this.snackBar=n,this._loadingService=s,this._dialogService=i,this.path="users",this.items=[],this.selectedItems=[],this.item={},this.model={},this.apiMeta={},this.searchTerm=null,this.sortBy="id",this.sortDirection="desc",this.sortOrder=l.x7.Descending,this.perPage=20,this.isLoading=!1,this.overlayStarSyntax=!1,this.selectable=!0,this.selectedRows=[],this.clickable=!1,this.multiple=!0,this.resizableColumns=!1,this.columns=[{name:"email",label:"Correo electr\xf3nico",sortable:!0,width:250},{name:"first_name",label:"Nombres",sortable:!0},{name:"last_name",label:"Apellidos",sortable:!0},{name:"created_at",label:"Creado en",sortable:!0},{name:"id",label:"",sortable:!1,width:60}]}filter(e){console.log(e)}sort(e){console.log(e)}page(e=null){console.log(e)}refreshTable(e=null){console.log(e)}showAlert(e=null){console.log(e)}getItems(e=1){this.isLoading=!0,this.api.get("api/"+this.path+"?page="+e+"&per-page="+this.perPage+this.getSortString()+this.getSearchString()).subscribe(e=>{this.items=e.data,this.apiMeta=e.meta,this.isLoading=!1},e=>{this.isLoading=!1})}getItem(e){this.isLoading=!0,this.api.get("api/"+this.path+"/"+e).subscribe(e=>{this.edit(e.data),this.isLoading=!1},e=>{this.isLoading=!1})}setItem(e){this.item=e}save(){this.model.id?this.update():this.store()}store(){console.log("store",this.model),this.api.post("api/"+this.path,{model:this.model}).subscribe(e=>{this.model={},this.snackBar.success(e.message),this.getItems(),this.sidenav.close(),this.router.navigateByUrl("/admin/users/users")},e=>{let t="";for(const n in e.errors)t=e.errors[n][0];this.snackBar.error(t)})}update(){this.api.put("api/"+this.path+"/"+this.model.id,{model:this.model}).subscribe(e=>{this.model={},this.snackBar.success(e.message),this.getItems(),this.sidenav.close(),this.router.navigateByUrl("/admin/users/users")},e=>{console.log(e);let t="";for(const n in e.errors)t=e.errors[n][0];this.snackBar.error(t)})}delete(e){this._dialogService.openConfirm({title:"Eliminar item",message:"Realmente desea realizar esta acci\xf3n?",cancelButton:"Cancelar",acceptButton:"Eliminar",width:"350px",disableClose:!0}).afterClosed().subscribe(t=>{t&&this.api.delete("api/"+this.path+"/"+e).subscribe(e=>{this.model={},this.snackBar.success(e.message),this.getItems()},e=>{this.snackBar.error(e.error.message)})})}deleteMultiple(){this._dialogService.openConfirm({title:"Eliminar "+this.selectedItems.length+" items",message:"Realmente desea realizar esta acci\xf3n?",cancelButton:"Cancelar",acceptButton:"Eliminar",width:"350px",disableClose:!0}).afterClosed().subscribe(e=>{if(e){let e=[];for(let t=0;t<this.selectedItems.length;t++)e.push(this.selectedItems[t].id);this.api.put("api/"+this.path+"/delete-multiple",{ids:e}).subscribe(e=>{this.snackBar.success(e.message),this.getItems(),this.selectedItems=[]},e=>{this.snackBar.error(e.error.message)})}})}edit(e){this.model=Object.assign({},e)}getSortString(){return"&sort="+JSON.stringify({column:this.sortBy,direction:this.sortDirection})}getSearchString(){let e=[];if(this.searchTerm&&""!==this.searchTerm)for(let t=0;t<this.columns.length;t++)"id"!==this.columns[t].name&&e.push({column:this.columns[t].name,operator:"cont",text:this.searchTerm});return"&query="+JSON.stringify(e)}setPerPage(e){this.perPage=e.source.value}setSearchTerm(e){console.log(e),this.searchTerm=e}setSortBy(e){this.sortBy=e.name,this.sortDirection=e.order.toLowerCase()}toggleLoading(e){"close"===e&&this._loadingService.resolve(),"open"===e&&this._loadingService.register()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(u.O),r.LFG(i.F0),r.LFG(c.c),r.LFG(d.bI),r.LFG(m.s$))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n(66182);const p=["sidenav"];function _(e,t){1&e&&(r.TgZ(0,"span",11),r._uU(1,"Usuarios"),r.qZA())}function f(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",12),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).user.deleteMultiple()}),r._uU(1),r.qZA()}if(2&e){const e=r.oxw(2);r.Q6J("color","warn"),r.xp6(1),r.hij("\n         Eliminar ",e.user.selectedItems.length," item(s)\n       ")}}function U(e,t){if(1&e&&(r.TgZ(0,"span",8),r._uU(1,"\n       "),r.YNc(2,_,2,0,"span",9),r._uU(3,"\n       "),r.YNc(4,f,2,2,"button",10),r._uU(5,"\n     "),r.qZA()),2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngIf",e.user.selectable&&!e.user.selectedItems.length||!e.user.selectable),r.xp6(2),r.Q6J("ngIf",e.user.selectedItems.length&&e.user.selectable)}}function Z(e,t){if(1&e&&(r._uU(0,"\n        "),r.TgZ(1,"span",20),r._uU(2),r.qZA(),r._uU(3,"\n\n      ")),2&e){const e=t.value;r.xp6(1),r.Q6J("title",e),r.xp6(1),r.Oqu(e)}}function v(e,t){1&e&&r._uU(0),2&e&&r.hij("\n        ",t.value,"\n      ")}function x(e,t){1&e&&r._uU(0),2&e&&r.hij("\n        ",t.value,"\n      ")}function b(e,t){1&e&&(r._uU(0),r.ALo(1,"date")),2&e&&r.hij("\n        ",r.xi3(1,1,t.value,"dd/MM/YYYY"),"\n      ")}function I(e,t){if(1&e){const e=r.EpF();r._uU(0,"\n        "),r.TgZ(1,"button",21),r.NdJ("click",function(){const t=r.CHM(e).value,n=r.oxw(2),s=r.MAs(3);return n.user.getItem(t),s.sidenav.open()}),r._uU(2,"\n          "),r.TgZ(3,"mat-icon"),r._uU(4,"edit"),r.qZA(),r._uU(5,"\n        "),r.qZA(),r._uU(6,"\n      ")}if(2&e){const e=t.value;r.xp6(1),r.Q6J("routerLink","/admin/users/"+e)}}const T=function(e,t){return{"layout-mat-sidenav-container":e,"layout-mat-sidenav-container-mobile":t}};function q(e,t){if(1&e){const e=r.EpF();r.ynx(0),r._uU(1,"\n    "),r.TgZ(2,"td-data-table",13,14),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().user.selectedItems=t})("sortChange",function(t){r.CHM(e);const n=r.oxw();return n.user.setSortBy(t),n.user.getItems()})("rowClick",function(){return null}),r._uU(4,"\n\n      "),r.YNc(5,Z,4,2,"ng-template",15),r._uU(6,"\n\n      "),r.YNc(7,v,1,1,"ng-template",16),r._uU(8,"\n\n      "),r.YNc(9,x,1,1,"ng-template",17),r._uU(10,"\n\n      "),r.YNc(11,b,2,4,"ng-template",18),r._uU(12,"\n\n      "),r.YNc(13,I,7,1,"ng-template",19),r._uU(14,"\n\n    "),r.qZA(),r._uU(15,"\n\n  "),r.BQk()}if(2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngClass",r.WLB(11,T,!e.layoutService.isMobile,e.layoutService.isMobile))("data",e.user.items)("columns",e.user.columns)("selectable",e.user.selectable)("clickable",e.user.clickable)("multiple",e.user.multiple)("sortable",!0)("sortBy","id")("resizableColumns",!1)("ngModel",e.user.selectedItems)("sortOrder",e.user.sortOrder)}}function A(e,t){1&e&&(r.ynx(0),r._uU(1,"\n    "),r.TgZ(2,"div",22),r._uU(3,"\n      "),r.TgZ(4,"mat-icon",23),r._uU(5,"people\n      "),r.qZA(),r._uU(6,"\n      "),r.TgZ(7,"h2"),r._uU(8,"No hay usuarios disponibles"),r.qZA(),r._uU(9,"\n    "),r.qZA(),r._uU(10,"\n  "),r.BQk())}function C(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-option",31),r.NdJ("onSelectionChange",function(t){r.CHM(e);const n=r.oxw(2);return n.user.setPerPage(t),n.user.getItems()}),r._uU(1),r.qZA()}if(2&e){const e=t.$implicit;r.Q6J("value",e),r.xp6(1),r.hij("\n        ",e,"\n      ")}}const M=function(){return[20,50,100]};function y(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"td-paging-bar",24,25),r.NdJ("change",function(t){return r.CHM(e),r.oxw().user.getItems(t.page)}),r._uU(2,"\n    "),r.TgZ(3,"a",26),r._uU(4,"\n      "),r.TgZ(5,"mat-icon"),r._uU(6,"file_download"),r.qZA(),r._uU(7,"\n    "),r.qZA(),r._uU(8,"\n\n    "),r.TgZ(9,"button",27),r.NdJ("click",function(){r.CHM(e);const t=r.oxw(),n=r.MAs(3);return t.user.model={id:0},t.router.navigateByUrl("/admin/users/0"),n.sidenav.open()}),r._uU(10,"\n      "),r.TgZ(11,"mat-icon"),r._uU(12,"add"),r.qZA(),r._uU(13,"\n    "),r.qZA(),r._uU(14,"\n\n    "),r._UZ(15,"span",0),r._uU(16,"\n    "),r.TgZ(17,"span",28),r._uU(18,"Rows per page:"),r.qZA(),r._uU(19,"\n    "),r.TgZ(20,"mat-select",29),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().user.perPage=t}),r._uU(21,"\n      "),r.YNc(22,C,2,2,"mat-option",30),r._uU(23,"\n    "),r.qZA(),r._uU(24),r.TgZ(25,"span",28),r._uU(26),r.qZA(),r._uU(27,"\n  "),r.qZA()}if(2&e){const e=r.MAs(1),t=r.oxw();r.Q6J("pageSize",t.user.perPage)("total",t.user.apiMeta.total),r.xp6(3),r.Q6J("href",t.environment.url+"/api/users/export",r.LSH),r.xp6(17),r.Udp("width",50,"px"),r.Q6J("ngModel",t.user.perPage),r.xp6(2),r.Q6J("ngForOf",r.DdM(9,M)),r.xp6(2),r.hij("\n    ",e.range,"\n    "),r.xp6(2),r.hij("of ",e.total,"")}}const S=function(e){return{display:e}};let J=(()=>{class e{constructor(e,t,n,s){this.user=e,this.layoutService=t,this.router=n,this.activatedRoute=s}ngOnInit(){this.user.getItems(),this.environment=a.N}ngAfterViewInit(){this.user.sidenav=this.sidenav.sidenav,this.activatedRoute.snapshot.params.id&&(0!=this.activatedRoute.snapshot.params.id?this.user.getItem(this.activatedRoute.snapshot.params.id):this.user.model={id:0},this.sidenav.sidenav.open())}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(h),r.Y36(g.d),r.Y36(i.F0),r.Y36(i.gz))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-users-list"]],viewQuery:function(e,t){if(1&e&&r.Gf(p,5),2&e){let e;r.iGM(e=r.CRH())&&(t.sidenav=e.first)}},decls:22,vars:9,consts:[["flex",""],["sidenav",""],["layout","row","layout-align","start center",1,"pad-left-sm","pad-right-sm",2,"min-height","53px"],["class","push-left-sm",4,"ngIf"],["backIcon","arrow_back","placeholder","Buscar usuario","flex","",1,"push-right-sm",3,"ngStyle","close","searchDebounce"],["searchBox",""],[4,"ngIf"],[3,"pageSize","total","change",4,"ngIf"],[1,"push-left-sm"],["class","mat-title",4,"ngIf"],["mat-flat-button","",3,"color","click",4,"ngIf"],[1,"mat-title"],["mat-flat-button","",3,"color","click"],[3,"ngClass","data","columns","selectable","clickable","multiple","sortable","sortBy","resizableColumns","ngModel","sortOrder","ngModelChange","sortChange","rowClick"],["dataTable",""],["tdDataTableTemplate","email"],["tdDataTableTemplate","first_name"],["tdDataTableTemplate","last_name"],["tdDataTableTemplate","created_at"],["tdDataTableTemplate","id"],["matLine","",3,"title"],["mat-icon-button","",2,"margin-left","-26px",3,"routerLink","click"],["layout","column","layout-align","center center",1,"tc-grey-500","mat-typography","pad-lg"],["matListAvatar","",1,"text-super","push-bottom"],[3,"pageSize","total","change"],["pagingBar",""],["mat-mini-fab","","color","info","target","_blank",3,"href"],["mat-mini-fab","","color","success",3,"click"],["hide-xs",""],["hide-xs","",3,"ngModel","ngModelChange"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[3,"value","onSelectionChange"]],template:function(e,t){if(1&e&&(r.TgZ(0,"mat-sidenav-container",0),r._uU(1,"\n\n  "),r._UZ(2,"app-users-sidenav",null,1),r._uU(4,"\n\n  "),r.TgZ(5,"div",2),r._uU(6,"\n     "),r.YNc(7,U,6,2,"span",3),r._uU(8,"\n    "),r.TgZ(9,"td-search-box",4,5),r.NdJ("close",function(){return t.user.setSearchTerm(null),t.user.getItems()})("searchDebounce",function(e){return t.user.setSearchTerm(e),t.user.getItems()}),r.qZA(),r._uU(11,"\n  "),r.qZA(),r._uU(12,"\n  "),r._UZ(13,"mat-divider"),r._uU(14,"\n\n  "),r.YNc(15,q,16,14,"ng-container",6),r._uU(16,"\n\n  "),r.YNc(17,A,11,0,"ng-container",6),r._uU(18,"\n\n\n  "),r.YNc(19,y,28,10,"td-paging-bar",7),r._uU(20,"\n\n"),r.qZA(),r._uU(21,"\n")),2&e){const e=r.MAs(10);r.xp6(5),r.ekj("mat-selected-title",t.user.selectedItems.length&&t.user.selectable),r.xp6(2),r.Q6J("ngIf",!e.searchVisible),r.xp6(2),r.Q6J("ngStyle",r.VKq(7,S,t.user.selectedItems.length?"none":"block")),r.xp6(6),r.Q6J("ngIf",t.user.items.length),r.xp6(2),r.Q6J("ngIf",!t.user.items.length),r.xp6(2),r.Q6J("ngIf",t.user.items.length)}},styles:[".layout-mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 230px)}.layout-mat-sidenav-container-mobile[_ngcontent-%COMP%]{height:calc(100vh - 214px)}[_nghost-%COMP%]     mat-sidenav-content{overflow-x:hidden}[_nghost-%COMP%]     .td-data-table-scrollable{-ms-overflow-style:none;scrollbar-width:none}[_nghost-%COMP%]     .td-data-table-scrollable::-webkit-scrollbar{display:none}"]}),e})();const w=[{path:"",component:o,children:[{path:"",component:J},{path:":id",component:J}]}];let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[i.Bz.forChild(w)],i.Bz]}),e})();var N=n(23017),Q=n(12522),k=n(51095),B=n(76627),F=n(88030),Y=n(37406),L=n(91233),D=n(3679),P=n(98295),E=n(49983),H=n(4438),j=n(12073);function R(e,t){1&e&&(r.TgZ(0,"mat-error",19),r._uU(1,"El campo es requerido\n      "),r.qZA())}function z(e,t){1&e&&(r.TgZ(0,"mat-error",19),r._uU(1,"El campo es requerido\n      "),r.qZA())}function G(e,t){1&e&&(r.TgZ(0,"mat-error",19),r._uU(1,"Ingrese un correo electr\xf3nico valido\n      "),r.qZA())}function X(e,t){1&e&&(r.TgZ(0,"mat-error",19),r._uU(1,"Ingrese una contrase\xf1a valida de al menos 6 caracteres\n      "),r.qZA())}function $(e,t){1&e&&(r.TgZ(0,"mat-error",19),r._uU(1,"Asigne al menos un rol\n    "),r.qZA())}const K=function(){return[]},V=function(){return["name"]};let W=(()=>{class e{constructor(e,t,n,s,i){this.userService=e,this.fileUploadService=t,this.snackBar=n,this.api=s,this.usersListComponent=i,this.disabled=!1,this.hour="23:59:59",this.editor=new Y.ML}ngOnInit(){}ngOnDestroy(){this.editor.destroy()}setUserRoles(e){this.userService.model.user_roles||(this.userService.model.user_roles=null),this.userService.model.user_roles=e}setUserRoleIds(e){e.length||(this.userService.model.user_role_ids=null),this.userService.model.user_role_ids=e}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(h),r.Y36(L.fl),r.Y36(c.c),r.Y36(u.O),r.Y36(J))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-users-form"]],decls:74,vars:34,consts:[["flex","",1,"pad"],["novalidate","",3,"ngSubmit"],["form","ngForm"],["appearance","outline",2,"width","100%"],["matInput","","type","text","name","first_name","id","first_name","placeholder","Nombres del usuario","required","",3,"ngModel","ngModelChange"],["first_name","ngModel"],["class","error",4,"ngIf"],["matInput","","type","text","name","last_name","id","last_name","placeholder","Apellidos del usuario","required","",3,"ngModel","ngModelChange"],["last_name","ngModel"],["matInput","","type","email","name","email","id","email","placeholder","Correo  electr\xf3nico","email","","required","",3,"ngModel","ngModelChange"],["email","ngModel"],["matInput","","type","password","name","password","id","password","placeholder","Cambie la contra\xf1a del usuario","minlength","6",3,"required","ngModel","ngModelChange"],["password","ngModel"],["type","hidden","name","user_role_ids","id","user_role_ids",3,"ngModel","required","ngModelChange"],["user_role_ids","ngModel"],[3,"label","min","max","required","searchInputLabel","searchInputPlaceholder","selected","selectedIds","searchUrl","searchDisplayColumns","searchColumns","notFoundUrl","notFoundButtonText","notFoundMessage","selectOut","selectIdsOut"],[1,"pad-top-lg"],["mat-raised-button","","color","success",1,"text-upper",3,"disabled","click"],["mat-button","","color","warn",1,"text-upper",3,"click"],[1,"error"]],template:function(e,t){if(1&e&&(r.TgZ(0,"div",0),r._uU(1,"\n\n  "),r.TgZ(2,"form",1,2),r.NdJ("ngSubmit",function(){return t.userService.save()}),r._uU(4,"\n\n    "),r.TgZ(5,"mat-form-field",3),r._uU(6,"\n      "),r.TgZ(7,"mat-label"),r._uU(8,"Nombres"),r.qZA(),r._uU(9,"\n      "),r.TgZ(10,"input",4,5),r.NdJ("ngModelChange",function(e){return t.userService.model.first_name=e}),r.qZA(),r._uU(12,"\n      "),r.YNc(13,R,2,0,"mat-error",6),r._uU(14,"\n    "),r.qZA(),r._uU(15,"\n\n    "),r.TgZ(16,"mat-form-field",3),r._uU(17,"\n      "),r.TgZ(18,"mat-label"),r._uU(19,"Apellidos"),r.qZA(),r._uU(20,"\n      "),r.TgZ(21,"input",7,8),r.NdJ("ngModelChange",function(e){return t.userService.model.last_name=e}),r.qZA(),r._uU(23,"\n      "),r.YNc(24,z,2,0,"mat-error",6),r._uU(25,"\n    "),r.qZA(),r._uU(26,"\n\n    "),r.TgZ(27,"mat-form-field",3),r._uU(28,"\n      "),r.TgZ(29,"mat-label"),r._uU(30,"Email"),r.qZA(),r._uU(31,"\n      "),r.TgZ(32,"input",9,10),r.NdJ("ngModelChange",function(e){return t.userService.model.email=e}),r.qZA(),r._uU(34,"\n      "),r.YNc(35,G,2,0,"mat-error",6),r._uU(36,"\n    "),r.qZA(),r._uU(37,"\n\n    "),r.TgZ(38,"mat-form-field",3),r._uU(39,"\n      "),r.TgZ(40,"mat-label"),r._uU(41,"Password"),r.qZA(),r._uU(42,"\n      "),r.TgZ(43,"input",11,12),r.NdJ("ngModelChange",function(e){return t.userService.model.password=e}),r.qZA(),r._uU(45,"\n      "),r.YNc(46,X,2,0,"mat-error",6),r._uU(47,"\n    "),r.qZA(),r._uU(48,"\n\n    "),r.TgZ(49,"input",13,14),r.NdJ("ngModelChange",function(e){return t.userService.model.user_role_ids=e}),r.qZA(),r._uU(51,"\n    "),r.YNc(52,$,2,0,"mat-error",6),r._uU(53,"\n    "),r.TgZ(54,"app-belongs-to-many-input",15),r.NdJ("selectOut",function(e){return t.setUserRoles(e)})("selectIdsOut",function(e){return t.setUserRoleIds(e)}),r.qZA(),r._uU(55,"\n\n  "),r.qZA(),r._uU(56,"\n\n  "),r.TgZ(57,"div",16),r._uU(58,"\n    "),r.TgZ(59,"button",17),r.NdJ("click",function(){return t.userService.save()}),r._uU(60,"Guardar\n    "),r.qZA(),r._uU(61,"\n    "),r.TgZ(62,"button",18),r.NdJ("click",function(){return t.userService.setItem({}),t.usersListComponent.router.navigateByUrl("/admin/users/users"),t.usersListComponent.sidenav.sidenav.close()}),r._uU(63,"Cancelar\n    "),r.qZA(),r._uU(64,"\n  "),r.qZA(),r._uU(65,"\n\n\n"),r.qZA(),r._uU(66,"\n\n"),r.TgZ(67,"div"),r._uU(68,"\n  "),r.TgZ(69,"pre"),r._uU(70),r.ALo(71,"json"),r.qZA(),r._uU(72,"\n"),r.qZA(),r._uU(73,"\n")),2&e){const e=r.MAs(3),n=r.MAs(11),s=r.MAs(22),i=r.MAs(33),o=r.MAs(44),a=r.MAs(50);let l,u;r.xp6(10),r.Q6J("ngModel",t.userService.model.first_name),r.xp6(3),r.Q6J("ngIf",n.hasError("required")),r.xp6(8),r.Q6J("ngModel",t.userService.model.last_name),r.xp6(3),r.Q6J("ngIf",s.hasError("required")),r.xp6(8),r.Q6J("ngModel",t.userService.model.email),r.xp6(3),r.Q6J("ngIf",i.invalid),r.xp6(8),r.Q6J("required",0===t.userService.model.id)("ngModel",t.userService.model.password),r.xp6(3),r.Q6J("ngIf",o.hasError("minlength")),r.xp6(3),r.Q6J("ngModel",t.userService.model.user_role_ids)("required",!(null!=t.userService.model&&null!=t.userService.model.user_role_ids&&t.userService.model.user_role_ids.length)),r.xp6(3),r.Q6J("ngIf",a.invalid),r.xp6(2),r.Q6J("label","Roles")("min",1)("max",3)("required",!0)("searchInputLabel","Agregar Rol")("searchInputPlaceholder","Busca el nombre del rol")("selected",null!==(l=t.userService.model.user_roles)&&void 0!==l?l:r.DdM(30,K))("selectedIds",null!==(u=t.userService.model.user_role_ids)&&void 0!==u?u:r.DdM(31,K))("searchUrl","api/roles")("searchDisplayColumns",r.DdM(32,V))("searchColumns",r.DdM(33,V))("notFoundUrl","/users/roles/0")("notFoundButtonText","Crear rol")("notFoundMessage","No se encontraron roles"),r.xp6(5),r.Q6J("disabled",e.invalid),r.xp6(11),r.hij("",r.lcZ(71,28,t.userService.model),"\n  ")}},directives:[D._Y,D.JL,D.F,P.KE,P.hX,E.Nt,D.Fj,D.Q7,D.JJ,D.On,s.O5,D.on,H.l,D.wO,j.l,k.lW,P.TO],pipes:[s.Ts],styles:[""]}),e})();const ee=["sidenav"],te=function(e){return{marginTop:e}};let ne=(()=>{class e{constructor(e,t,n){this.router=e,this.layoutService=t,this.usersListComponent=n}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(i.F0),r.Y36(g.d),r.Y36(J))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-users-sidenav"]],viewQuery:function(e,t){if(1&e&&r.Gf(ee,5),2&e){let e;r.iGM(e=r.CRH())&&(t.sidenav=e.first)}},decls:22,vars:5,consts:[["mode","over","position","end",2,"width","100%",3,"disableClose"],["sidenav",""],["layout","column","layout-fill",""],[2,"position","fixed"],["mat-icon-button","",3,"click"],["flex","",1,"mat-content",3,"ngStyle"]],template:function(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-sidenav",0,1),r._uU(2,"\n  "),r.TgZ(3,"div",2),r._uU(4,"\n    "),r.TgZ(5,"mat-toolbar",3),r._uU(6,"\n      "),r.TgZ(7,"button",4),r.NdJ("click",function(){r.CHM(e);const n=r.MAs(1);return t.usersListComponent.router.navigateByUrl("/admin/users"),n.close(),t.usersListComponent.user.model={}}),r._uU(8,"\n        "),r.TgZ(9,"mat-icon"),r._uU(10,"close"),r.qZA(),r._uU(11,"\n      "),r.qZA(),r._uU(12),r.qZA(),r._uU(13,"\n    "),r.TgZ(14,"div",5),r._uU(15,"\n      "),r._UZ(16,"app-users-form"),r._uU(17,"\n      "),r._uU(18,"\n    "),r.qZA(),r._uU(19,"\n  "),r.qZA(),r._uU(20,"\n"),r.qZA(),r._uU(21,"\n")}2&e&&(r.Q6J("disableClose",!0),r.xp6(12),r.hij("\n      ",t.usersListComponent.user.model.id?"Editar usuario":"Crear usuario","\n    "),r.xp6(2),r.Q6J("ngStyle",r.VKq(3,te,t.layoutService.isMobile?"56px":"64px")))},directives:[N.JX,Q.Ye,k.lW,B.Hw,s.PC,F.Zl,W],styles:["[_nghost-%COMP%]     mat-sidenav-content{overflow-x:hidden}"]}),e})();var se=n(71650),ie=n(46941),re=n(1769),oe=n(72458),ae=n(92859),le=n(77746),ue=n(85873),ce=n(67441);let de=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[s.ez,se.m8,O]]}),e})();r.B6R(J,[N.TM,ne,s.O5,k.lW,ie.K_,s.PC,F.Zl,re.d,l.vn,s.mk,F.oO,D.JJ,D.On,l.Cp,oe.X2,ae.YI,i.rH,B.Hw,le.eA,ue.S,k.zs,ce.gD,s.sg,oe.ey],[s.uU])}}]);