(self.webpackChunkngxcovalent=self.webpackChunkngxcovalent||[]).push([[7748],{12073:(e,t,n)=>{"use strict";n.d(t,{l:()=>k});var a=n(37716),o=n(3679),s=n(54395),r=n(68307),i=n(43190),l=n(68939),u=n(91841),c=n(84962),d=n(38583),h=n(58341),g=n(98295),m=n(49983),p=n(21554),_=n(76627),f=n(72458),v=n(51095),U=n(63423),Z=n(92859),b=n(29790);function x(e,t){1&e&&(a.ynx(0),a._uU(1," *"),a.BQk())}function T(e,t){if(1&e&&(a.TgZ(0,"h4"),a._uU(1),a.YNc(2,x,2,0,"ng-container",0),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Oqu(e.label),a.xp6(1),a.Q6J("ngIf",e.min)}}function S(e,t){if(1&e&&(a.ynx(0),a._uU(1,"\n      "),a.TgZ(2,"span"),a.TgZ(3,"b"),a._uU(4),a.qZA(),a.qZA(),a._uU(5,"\n    "),a.BQk()),2&e){const e=t.$implicit,n=a.oxw().$implicit;a.xp6(4),a.Oqu(n[e])}}function C(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"mat-chip",9),a.NdJ("removed",function(){const t=a.CHM(e).$implicit;return a.oxw().removeItem(t)}),a._uU(1,"\n    "),a.YNc(2,S,6,1,"ng-container",10),a._uU(3,"\n    "),a._UZ(4,"span",11),a._uU(5,"\n    "),a.TgZ(6,"button",12),a._uU(7,"\n      "),a.TgZ(8,"mat-icon"),a._uU(9,"cancel"),a.qZA(),a._uU(10,"\n    "),a.qZA(),a._uU(11,"\n  "),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("removable",!0),a.xp6(2),a.Q6J("ngForOf",e.searchDisplayColumns)}}function I(e,t){if(1&e&&(a.TgZ(0,"mat-option",13),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij("",e.loadingText,"\n    ")}}function A(e,t){if(1&e&&(a.ynx(0),a._uU(1,"\n          "),a.TgZ(2,"span"),a.TgZ(3,"b"),a._uU(4),a.qZA(),a.qZA(),a._uU(5,"\n        "),a.BQk()),2&e){const e=t.$implicit,n=a.oxw().$implicit;a.xp6(4),a.Oqu(n[e])}}function y(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"mat-option",15),a.NdJ("onSelectionChange",function(){const t=a.CHM(e).$implicit;return a.oxw(2).addItem(t)}),a._uU(1,"\n        "),a.YNc(2,A,6,1,"ng-container",10),a._uU(3,"\n\n      "),a.qZA()}if(2&e){const e=t.$implicit,n=a.oxw(2);a.Q6J("value",e.id),a.xp6(2),a.Q6J("ngForOf",n.searchDisplayColumns)}}function q(e,t){if(1&e&&(a.ynx(0),a._uU(1,"\n      "),a.YNc(2,y,4,2,"mat-option",14),a._uU(3,"\n    "),a.BQk()),2&e){const e=a.oxw();a.xp6(2),a.Q6J("ngForOf",e.filteredData)}}function M(e,t){if(1&e&&(a.ynx(0),a._uU(1,"\n              "),a.TgZ(2,"a",17),a._uU(3),a.qZA(),a._uU(4,"\n            "),a.BQk()),2&e){const e=a.oxw(2);a.xp6(2),a.Q6J("routerLink",e.notFoundUrl),a.xp6(1),a.Oqu(e.notFoundButtonText)}}function w(e,t){if(1&e&&(a.ynx(0),a._uU(1,"\n      "),a.TgZ(2,"mat-option",16),a._uU(3,"\n          "),a.TgZ(4,"span"),a._uU(5,"\n            "),a.TgZ(6,"b"),a._uU(7),a.qZA(),a._uU(8,"\n            "),a.YNc(9,M,5,2,"ng-container",0),a._uU(10,"\n          "),a.qZA(),a._uU(11,"\n      "),a.qZA(),a._uU(12,"\n    "),a.BQk()),2&e){const e=a.oxw();a.xp6(2),a.Q6J("value",null),a.xp6(5),a.Oqu(e.notFoundMessage),a.xp6(2),a.Q6J("ngIf",e.notFoundUrl&&e.notFoundButtonText)}}function O(e,t){if(1&e&&(a.TgZ(0,"mat-hint",18),a._uU(1,"\n    "),a.TgZ(2,"span",19),a._uU(3,"Assign at less"),a.qZA(),a._uU(4),a.TgZ(5,"span"),a._uU(6),a.qZA(),a._uU(7,"\n  "),a.qZA()),2&e){const e=a.oxw();a.xp6(4),a.hij(" ",e.min," "),a.xp6(2),a.Oqu(e.label)}}function J(e,t){if(1&e&&(a.TgZ(0,"mat-hint",18),a._uU(1,"\n    "),a.TgZ(2,"span",19),a._uU(3,"Assign a maximum"),a.qZA(),a._uU(4),a.TgZ(5,"span"),a._uU(6),a.qZA(),a._uU(7,"\n  "),a.qZA()),2&e){const e=a.oxw();a.xp6(4),a.hij(" ",e.max," "),a.xp6(2),a.Oqu(e.label)}}let k=(()=>{class e{constructor(e,t){this.http=e,this.snackBar=t,this.selected=[],this.selectedIds=[],this.searchUrl=null,this.searchColumns=["name"],this.searchDisplayColumns=["name"],this.searchInputLabel="Buscar item",this.searchInputPlaceholder="Buscar...",this.notFoundMessage="No items found",this.notFoundButtonText=null,this.notFoundUrl=null,this.loadingText="Buscando...",this.required=!1,this.label=null,this.min=null,this.max=null,this.selectOut=new a.vpe,this.selectIdsOut=new a.vpe,this.searchInput=new o.NI,this.searchString="",this.filteredData=[],this.isLoading=!1,this.errorMessage=""}ngOnInit(){this.filterData()}getSearchString(e){let t=[];return this.searchColumns.map(n=>{t.push({column:n,operator:"cont",text:e})}),"&query="+JSON.stringify(t)}filterData(){this.searchInput.valueChanges.pipe((0,s.b)(500),(0,r.b)(()=>{this.errorMessage="",this.filteredData=[],this.isLoading=!0}),(0,i.w)(e=>this.http.get(this.searchUrl+"?per_page=100"+this.getSearchString(e)).pipe((0,l.x)(()=>{this.isLoading=!1})))).subscribe(e=>{null==e.data?(this.errorMessage=e.message,this.filteredData=[]):(this.errorMessage="",this.filteredData=e.data)})}addItem(e){var t,n,a;let o=!1;if(this.selected)for(let s=0;s<(null===(t=this.selected)||void 0===t?void 0:t.length);s++)this.selected[s].id===e.id&&(o=!0);this.searchInput.setValue(""),this.max&&this.selected.length>=this.max?this.snackBar.openSnackBar("Solo puedes agregar "+this.max+" items","OK"):o||(null===(n=this.selectedIds)||void 0===n||n.push(e.id),null===(a=this.selected)||void 0===a||a.push(e),this.selectOut.emit(this.selected),this.selectIdsOut.emit(this.selectedIds))}removeItem(e){var t;null===(t=this.selected)||void 0===t||t.map((t,n)=>{t.id===e.id&&this.selected.splice(n,1)}),this.selectedIds.map((t,n)=>{t==e.id&&this.selectedIds.splice(n,1)}),this.selectOut.emit(this.selected),this.selectIdsOut.emit(this.selectedIds)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(u.eN),a.Y36(c.c))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-belongs-to-many-input"]],inputs:{selected:"selected",selectedIds:"selectedIds",searchUrl:"searchUrl",searchColumns:"searchColumns",searchDisplayColumns:"searchDisplayColumns",searchInputLabel:"searchInputLabel",searchInputPlaceholder:"searchInputPlaceholder",notFoundMessage:"notFoundMessage",notFoundButtonText:"notFoundButtonText",notFoundUrl:"notFoundUrl",loadingText:"loadingText",required:"required",label:"label",min:"min",max:"max"},outputs:{selectOut:"selectOut",selectIdsOut:"selectIdsOut"},decls:30,vars:11,consts:[[4,"ngIf"],[1,"mat-chip-list-stacked"],[3,"removable","removed",4,"ngFor","ngForOf"],["appearance","outline",2,"width","100%","margin-top","0.5rem"],["matInput","",3,"formControl","placeholder","matAutocomplete"],["dataSearch",""],["autocompleteTags","matAutocomplete"],["class","is-loading",4,"ngIf"],["style","color: red;",4,"ngIf"],[3,"removable","removed"],[4,"ngFor","ngForOf"],["flex",""],["matChipRemove",""],[1,"is-loading"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[3,"value","onSelectionChange"],[3,"value"],["mat-button","",3,"routerLink"],[2,"color","red"],["translate",""]],template:function(e,t){if(1&e&&(a.YNc(0,T,3,2,"h4",0),a._uU(1,"\n"),a.TgZ(2,"mat-chip-list",1),a._uU(3,"\n  "),a.YNc(4,C,12,2,"mat-chip",2),a._uU(5,"\n"),a.qZA(),a._uU(6,"\n"),a.TgZ(7,"mat-form-field",3),a._uU(8,"\n  "),a.TgZ(9,"mat-label"),a._uU(10),a.qZA(),a._uU(11,"\n  "),a._UZ(12,"input",4,5),a._uU(14,"\n  "),a.TgZ(15,"mat-autocomplete",null,6),a._uU(17,"\n    "),a.YNc(18,I,2,1,"mat-option",7),a._uU(19,"\n    "),a.YNc(20,q,4,1,"ng-container",0),a._uU(21,"\n    "),a.YNc(22,w,13,3,"ng-container",0),a._uU(23,"\n  "),a.qZA(),a._uU(24,"\n  "),a.YNc(25,O,8,2,"mat-hint",8),a._uU(26,"\n  "),a.YNc(27,J,8,2,"mat-hint",8),a._uU(28,"\n"),a.qZA(),a._uU(29,"\n\n")),2&e){const e=a.MAs(16);a.Q6J("ngIf",t.label),a.xp6(4),a.Q6J("ngForOf",t.selected),a.xp6(6),a.Oqu(t.searchInputLabel),a.xp6(2),a.Q6J("formControl",t.searchInput)("placeholder",t.searchInputPlaceholder)("matAutocomplete",e),a.xp6(6),a.Q6J("ngIf",t.isLoading),a.xp6(2),a.Q6J("ngIf",!t.isLoading&&t.filteredData.length),a.xp6(2),a.Q6J("ngIf",!t.isLoading&&!t.filteredData.length),a.xp6(3),a.Q6J("ngIf",t.min&&t.selected.length<t.min),a.xp6(2),a.Q6J("ngIf",t.max&&t.selected.length>t.max)}},directives:[d.O5,h.qn,d.sg,g.KE,g.hX,m.Nt,o.Fj,p.ZL,o.JJ,o.oH,p.XC,h.HS,h.qH,_.Hw,f.ey,v.zs,U.yS,Z.YI,g.bx,b.Pi],styles:["h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem}"]}),e})()},7748:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CovalentAuthorsModule:()=>pe});var a=n(38583),o=n(63423),s=n(37716);let r=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-covalent-authors"]],decls:2,vars:0,template:function(e,t){1&e&&(s._UZ(0,"router-outlet"),s._uU(1,"\n"))},directives:[o.lC],styles:[""]}),e})();var i=n(89332),l=(()=>(function(e){e[e.ASC="asc"]="ASC",e[e.DESC="desc"]="DESC"}(l||(l={})),l))();let u=(()=>{class e{constructor(e){this.api=e,this.data=[{created_at:"2015-11-04T19:00:31Z",name:"Change data capture for sales DB",owner:"Kyle",updated_at:"2016-11-08T19:00:31Z"},{created_at:"2015-11-08T19:00:31Z",name:"Change data capture for MF DB",owner:"Richa",updated_at:"2016-11-09T19:00:31Z"},{created_at:"2015-12-11T19:00:31Z",name:"Our Data Lake",owner:"Ed",updated_at:"2016-12-07T19:00:31Z"},{created_at:"2015-11-05T19:00:31Z",name:"Nightly batched analytics",owner:"Ilsun",updated_at:"2016-11-07T19:00:31Z"},{created_at:"2015-12-12T19:00:31Z",name:"Long term data storage",owner:"Jeremy",updated_at:"2016-12-08T19:00:31Z"},{created_at:"2015-12-15T19:00:31Z",name:"On the fly analytics",owner:"Jenn",updated_at:"2016-12-09T19:00:31Z"},{created_at:"2015-11-04T19:00:31Z",name:"Change data capture for sales DB",owner:"Kyle",updated_at:"2016-11-08T19:00:31Z"},{created_at:"2015-11-08T19:00:31Z",name:"Change data capture for MF DB",owner:"Richa",updated_at:"2016-11-09T19:00:31Z"},{created_at:"2015-12-11T19:00:31Z",name:"Our Data Lake",owner:"Ed",updated_at:"2016-12-07T19:00:31Z"},{created_at:"2015-11-05T19:00:31Z",name:"Nightly batched analytics",owner:"Ilsun",updated_at:"2016-11-07T19:00:31Z"},{created_at:"2015-12-12T19:00:31Z",name:"Long term data storage",owner:"Jeremy",updated_at:"2016-12-08T19:00:31Z"},{created_at:"2015-12-15T19:00:31Z",name:"On the fly analytics",owner:"Jenn",updated_at:"2016-12-09T19:00:31Z"},{created_at:"2015-11-08T19:00:31Z",name:"Change data capture for MF DB",owner:"Richa",updated_at:"2016-11-09T19:00:31Z"},{created_at:"2015-12-11T19:00:31Z",name:"Our Data Lake",owner:"Ed",updated_at:"2016-12-07T19:00:31Z"},{created_at:"2015-11-05T19:00:31Z",name:"Nightly batched analytics",owner:"Ilsun",updated_at:"2016-11-07T19:00:31Z"},{created_at:"2015-12-12T19:00:31Z",name:"Long term data storage",owner:"Jeremy",updated_at:"2016-12-08T19:00:31Z"},{created_at:"2015-12-15T19:00:31Z",name:"On the fly analytics",owner:"Jenn",updated_at:"2016-12-09T19:00:31Z"},{created_at:"2015-11-04T19:00:31Z",name:"Change data capture for sales DB",owner:"Kyle",updated_at:"2016-11-08T19:00:31Z"},{created_at:"2015-11-08T19:00:31Z",name:"Change data capture for MF DB",owner:"Richa",updated_at:"2016-11-09T19:00:31Z"},{created_at:"2015-12-11T19:00:31Z",name:"Our Data Lake",owner:"Ed",updated_at:"2016-12-07T19:00:31Z"},{created_at:"2015-11-05T19:00:31Z",name:"Nightly batched analytics",owner:"Ilsun",updated_at:"2016-11-07T19:00:31Z"},{created_at:"2015-12-12T19:00:31Z",name:"Long term data storage",owner:"Jeremy",updated_at:"2016-12-08T19:00:31Z"},{created_at:"2015-12-15T19:00:31Z",name:"On the fly analytics",owner:"Jenn",updated_at:"2016-12-09T19:00:31Z"}],this.columnOptions=[{name:"Name",value:"name"},{name:"Updated",value:"updated_at"},{name:"Created",value:"created_at"}],this.sortKey=this.columnOptions[1].value,this.pageSize=5,this.example1=!0,this.headers={},this.columnOptions.forEach(e=>{this.headers[e.value]=l.ASC})}isASC(e){return this.headers[e]===l.ASC}sortBy(e){this.headers[e]=this.headers[e]===l.ASC?l.DESC:l.ASC,this.data=this.data.sort((t,n)=>{let a=t[e],o=n[e],s=0;return a<o?s=-1:a>o&&(s=1),s*(this.headers[e]===l.DESC?-1:1)})}search(e){}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(i.O))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c=n(25414),d=n(50115),h=n(77001),g=n(48487),m=n(78739);let p=(()=>{class e{constructor(e,t,n,a,o){this.api=e,this.router=t,this.snackBar=n,this._loadingService=a,this._dialogService=o,this.path="books",this.items=[],this.selectedItems=[],this.item={},this.model={},this.apiMeta={},this.searchTerm=null,this.sortBy="id",this.sortDirection="desc",this.sortOrder=d.x7.Descending,this.perPage=20,this.isLoading=!1,this.overlayStarSyntax=!1,this.selectable=!0,this.selectedRows=[],this.clickable=!1,this.multiple=!0,this.resizableColumns=!1,this.columns=[{name:"title",label:"Title",sortable:!0,filter:!0},{name:"authors",label:"Authors",sortable:!1},{name:"genre.name",label:"Genre",sortable:!0},{name:"published_at",label:"Published At",sortable:!0},{name:"bought_at",label:"Comprado At",sortable:!0},{name:"created_at",label:"Created At",sortable:!0},{name:"id",label:"",sortable:!1,width:60}]}filter(e){console.log(e)}sort(e){console.log(e)}page(e=null){console.log(e)}refreshTable(e=null){console.log(e)}showAlert(e=null){console.log(e)}getItems(e=1){this.isLoading=!0,this.api.get("api/"+this.path+"?page="+e+"&per_page="+this.perPage+this.getSortString()+this.getSearchString()).subscribe(e=>{this.items=e.data,this.apiMeta=e.meta,this.isLoading=!1},e=>{this.isLoading=!1})}getItem(e){this.isLoading=!0,this.api.get("api/"+this.path+"/"+e).subscribe(e=>{this.edit(e.data),this.isLoading=!1},e=>{this.isLoading=!1})}setItem(e){this.item=e}save(){0===this.model.id?this.store():this.update()}store(){console.log("store",this.model),this.api.post("api/"+this.path,{model:this.model}).subscribe(e=>{this.model={},this.openSnackBar(e.message,"OK",["snack-bar-success"]),this.getItems()},e=>{let t="";for(const n in e.errors)t=e.errors[n][0];this.openSnackBar(t,"OK",["snack-bar-danger"])})}update(){console.log("update",this.model),this.api.put("api/"+this.path+"/"+this.model.id,{model:this.model}).subscribe(e=>{this.model={},this.openSnackBar(e.message,"OK",["snack-bar-success"]),this.getItems()},e=>{console.log(e);let t="";for(const n in e.errors)t=e.errors[n][0];this.openSnackBar(t,"OK",["snack-bar-danger"])})}delete(e){this._dialogService.openConfirm({title:"Eliminar item",message:"Realmente desea realizar esta acci\xf3n?",cancelButton:"Cancelar",acceptButton:"Eliminar",width:"350px",disableClose:!0}).afterClosed().subscribe(t=>{t&&this.api.delete("api/"+this.path+"/"+e).subscribe(e=>{this.model={},this.openSnackBar(e.message,"OK",["snack-bar-success"]),this.getItems()},e=>{this.openSnackBar(e.error.message,"OK",["snack-bar-danger"])})})}deleteMultiple(){this._dialogService.openConfirm({title:"Eliminar "+this.selectedItems.length+" items",message:"Realmente desea realizar esta acci\xf3n?",cancelButton:"Cancelar",acceptButton:"Eliminar",width:"350px",disableClose:!0}).afterClosed().subscribe(e=>{if(e){let e=[];for(let t=0;t<this.selectedItems.length;t++)e.push(this.selectedItems[t].id);this.api.put("api/"+this.path+"/delete-multiple",{ids:e}).subscribe(e=>{this.openSnackBar(e.message,"OK",["snack-bar-success"]),this.getItems(),this.selectedItems=[]},e=>{this.openSnackBar(e.error.message,"OK",["snack-bar-danger"])})}})}edit(e){this.model=Object.assign({},e)}getSortString(){return"&q[s]="+this.sortBy+":"+this.sortDirection}getSearchString(){let e="";if(this.searchTerm&&""!==this.searchTerm)for(let t=0;t<this.columns.length;t++)"id"!==this.columns[t].name&&"authors"!==this.columns[t].name&&(e+="&q["+this.columns[t].name+":cont]="+this.searchTerm);return e}openSnackBar(e,t="OK",n=[],a="top"){this.snackBar.open(e,t,{verticalPosition:a,panelClass:n})}setPerPage(e){this.perPage=e.source.value}setSearchTerm(e){console.log(e),this.searchTerm=e}setSortBy(e){this.sortBy=e.name,this.sortDirection=e.order.toLowerCase()}toggleLoading(e){"close"===e&&this._loadingService.resolve(),"open"===e&&this._loadingService.register()}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(i.O),s.LFG(o.F0),s.LFG(h.ux),s.LFG(g.bI),s.LFG(m.s$))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const _=["sidenav"];function f(e,t){1&e&&(s.TgZ(0,"span",11),s._uU(1,"Covalent Authors"),s.qZA())}function v(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",12),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).authorService.deleteMultiple()}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw(2);s.Q6J("color","warn"),s.xp6(1),s.hij("\n         Delete ",e.authorService.selectedItems.length," item(s) selected\n       ")}}function U(e,t){if(1&e&&(s.TgZ(0,"span",8),s._uU(1,"\n       "),s.YNc(2,f,2,0,"span",9),s._uU(3,"\n       "),s._uU(4,"\n       "),s.YNc(5,v,2,2,"button",10),s._uU(6,"\n     "),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Q6J("ngIf",e.authorService.selectable&&!e.authorService.selectedItems.length||!e.authorService.selectable),s.xp6(3),s.Q6J("ngIf",e.authorService.selectedItems.length&&e.authorService.selectable)}}function Z(e,t){1&e&&(s.ynx(0),s._uU(1,","),s.BQk())}function b(e,t){if(1&e&&(s.ynx(0),s._uU(1,"\n              "),s.ynx(2),s._uU(3),s.BQk(),s.YNc(4,Z,2,0,"ng-container",6),s._uU(5,"\n          "),s.BQk()),2&e){const e=t.$implicit,n=t.last;s.xp6(3),s.Oqu(e.name),s.xp6(1),s.Q6J("ngIf",!n)}}function x(e,t){if(1&e&&(s._uU(0,"\n        "),s.TgZ(1,"span"),s._uU(2,"\n          "),s.YNc(3,b,6,2,"ng-container",20),s._uU(4,"\n        "),s.qZA(),s._uU(5,"\n      ")),2&e){const e=t.value;s.xp6(3),s.Q6J("ngForOf",e)}}function T(e,t){1&e&&s._uU(0),2&e&&s.hij("\n        ",t.value.name,"\n      ")}function S(e,t){1&e&&(s._uU(0),s.ALo(1,"date")),2&e&&s.hij("\n        ",s.xi3(1,1,t.value,"dd/MM/YYYY"),"\n      ")}function C(e,t){1&e&&(s._uU(0),s.ALo(1,"date")),2&e&&s.hij("\n        ",s.xi3(1,1,t.value,"dd/MM/YYYY hh:mm a"),"\n      ")}function I(e,t){if(1&e){const e=s.EpF();s._uU(0,"\n        "),s.TgZ(1,"button",21),s.NdJ("click",function(){const t=s.CHM(e).value,n=s.oxw(2),a=s.MAs(3);return n.authorService.getItem(t),a.sidenav.open()}),s._uU(2,"\n          "),s.TgZ(3,"mat-icon"),s._uU(4,"edit"),s.qZA(),s._uU(5,"\n        "),s.qZA(),s._uU(6,"\n      ")}if(2&e){const e=t.value;s.xp6(1),s.Q6J("routerLink","/covalent/authors/"+e)}}const A=function(e,t){return{"layout-mat-sidenav-container":e,"layout-mat-sidenav-container-mobile":t}};function y(e,t){if(1&e){const e=s.EpF();s.ynx(0),s._uU(1,"\n    "),s.TgZ(2,"td-data-table",13,14),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().authorService.selectedItems=t})("sortChange",function(t){s.CHM(e);const n=s.oxw();return n.authorService.setSortBy(t),n.authorService.getItems()})("rowClick",function(){return null}),s._uU(4,"\n\n      "),s.YNc(5,x,6,1,"ng-template",15),s._uU(6,"\n\n      "),s.YNc(7,T,1,1,"ng-template",16),s._uU(8,"\n\n      "),s.YNc(9,S,2,4,"ng-template",17),s._uU(10,"\n\n      "),s.YNc(11,C,2,4,"ng-template",18),s._uU(12,"\n\n      "),s.YNc(13,I,7,1,"ng-template",19),s._uU(14,"\n\n    "),s.qZA(),s._uU(15,"\n\n  "),s.BQk()}if(2&e){const e=s.oxw();s.xp6(2),s.Q6J("ngClass",s.WLB(11,A,!e.layoutService.isMobile,e.layoutService.isMobile))("data",e.authorService.items)("columns",e.authorService.columns)("selectable",e.authorService.selectable)("clickable",e.authorService.clickable)("multiple",e.authorService.multiple)("sortable",!0)("sortBy","id")("resizableColumns",!1)("ngModel",e.authorService.selectedItems)("sortOrder",e.authorService.sortOrder)}}function q(e,t){1&e&&(s.ynx(0),s._uU(1,"\n    "),s.TgZ(2,"div",22),s._uU(3,"\n      "),s.TgZ(4,"mat-icon",23),s._uU(5,"menu_book\n      "),s.qZA(),s._uU(6,"\n      "),s.TgZ(7,"h2"),s._uU(8,"No books available"),s.qZA(),s._uU(9,"\n    "),s.qZA(),s._uU(10,"\n  "),s.BQk())}function M(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-option",29),s.NdJ("onSelectionChange",function(t){s.CHM(e);const n=s.oxw(2);return n.authorService.setPerPage(t),n.authorService.getItems()}),s._uU(1),s.qZA()}if(2&e){const e=t.$implicit;s.Q6J("value",e),s.xp6(1),s.hij("\n        ",e,"\n      ")}}const w=function(){return[20,50,100]};function O(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"td-paging-bar",24,25),s.NdJ("change",function(t){return s.CHM(e),s.oxw().authorService.getItems(t.page)}),s._uU(2,"\n    "),s.TgZ(3,"span",26),s._uU(4,"Rows per page:"),s.qZA(),s._uU(5,"\n    "),s.TgZ(6,"mat-select",27),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().authorService.perPage=t}),s._uU(7,"\n      "),s.YNc(8,M,2,2,"mat-option",28),s._uU(9,"\n    "),s.qZA(),s._uU(10),s.TgZ(11,"span",26),s._uU(12),s.qZA(),s._uU(13,"\n  "),s.qZA()}if(2&e){const e=s.MAs(1),t=s.oxw();s.Q6J("pageSize",t.authorService.perPage)("total",t.authorService.apiMeta.total),s.xp6(6),s.Udp("width",50,"px"),s.Q6J("ngModel",t.authorService.perPage),s.xp6(2),s.Q6J("ngForOf",s.DdM(8,w)),s.xp6(2),s.hij("\n    ",e.range,"\n    "),s.xp6(2),s.hij("of ",e.total,"")}}const J=function(e){return{display:e}};let k=(()=>{class e{constructor(e,t,n,a,o){this.covalentAuthorService=e,this.layoutService=t,this.authorService=n,this.router=a,this.activatedRoute=o}ngOnInit(){this.authorService.getItems()}ngAfterViewInit(){this.authorService.sidenav=this.sidenav.sidenav,this.activatedRoute.snapshot.params.id&&(0!=this.activatedRoute.snapshot.params.id?this.authorService.getItem(this.activatedRoute.snapshot.params.id):this.authorService.model={},this.sidenav.sidenav.open())}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(u),s.Y36(c.W),s.Y36(p),s.Y36(o.F0),s.Y36(o.gz))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-covalent-authos-list"]],viewQuery:function(e,t){if(1&e&&s.Gf(_,5),2&e){let e;s.iGM(e=s.CRH())&&(t.sidenav=e.first)}},decls:23,vars:9,consts:[["flex",""],["sidenav",""],["layout","row","layout-align","start center",1,"pad-left-sm","pad-right-sm",2,"min-height","53px"],["class","push-left-sm",4,"ngIf"],["backIcon","arrow_back","placeholder","Buscar author","flex","",1,"push-right-sm",3,"ngStyle","close","searchDebounce"],["searchBox",""],[4,"ngIf"],[3,"pageSize","total","change",4,"ngIf"],[1,"push-left-sm"],["class","mat-title",4,"ngIf"],["mat-flat-button","",3,"color","click",4,"ngIf"],[1,"mat-title"],["mat-flat-button","",3,"color","click"],[3,"ngClass","data","columns","selectable","clickable","multiple","sortable","sortBy","resizableColumns","ngModel","sortOrder","ngModelChange","sortChange","rowClick"],["dataTable",""],["tdDataTableTemplate","authors"],["tdDataTableTemplate","genre"],["tdDataTableTemplate","published_at"],["tdDataTableTemplate","bought_at"],["tdDataTableTemplate","id"],[4,"ngFor","ngForOf"],["mat-icon-button","",2,"margin-left","-26px",3,"routerLink","click"],["layout","column","layout-align","center center",1,"tc-grey-500","mat-typography","pad-lg"],["matListAvatar","",1,"text-super","push-bottom"],[3,"pageSize","total","change"],["pagingBar",""],["hide-xs",""],[3,"ngModel","ngModelChange"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[3,"value","onSelectionChange"]],template:function(e,t){if(1&e&&(s.TgZ(0,"mat-sidenav-container",0),s._uU(1,"\n\n  "),s._UZ(2,"app-covalent-authors-sidenav",null,1),s._uU(4,"\n\n  "),s._uU(5,"\n  \n  "),s.TgZ(6,"div",2),s._uU(7,"\n     "),s.YNc(8,U,7,2,"span",3),s._uU(9,"\n    "),s.TgZ(10,"td-search-box",4,5),s.NdJ("close",function(){return t.authorService.setSearchTerm(null),t.authorService.getItems()})("searchDebounce",function(e){return t.authorService.setSearchTerm(e),t.authorService.getItems()}),s.qZA(),s._uU(12,"\n  "),s.qZA(),s._uU(13,"\n  "),s._UZ(14,"mat-divider"),s._uU(15,"\n\n  "),s.YNc(16,y,16,14,"ng-container",6),s._uU(17,"\n\n  "),s.YNc(18,q,11,0,"ng-container",6),s._uU(19,"\n\n\n  "),s.YNc(20,O,14,9,"td-paging-bar",7),s._uU(21,"\n\n"),s.qZA(),s._uU(22,"\n")),2&e){const e=s.MAs(11);s.xp6(6),s.ekj("mat-selected-title",t.authorService.selectedItems.length&&t.authorService.selectable),s.xp6(2),s.Q6J("ngIf",!e.searchVisible),s.xp6(2),s.Q6J("ngStyle",s.VKq(7,J,t.authorService.selectedItems.length?"none":"block")),s.xp6(6),s.Q6J("ngIf",t.authorService.items.length),s.xp6(2),s.Q6J("ngIf",!t.authorService.items.length),s.xp6(2),s.Q6J("ngIf",t.authorService.items.length)}},styles:[".layout-mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 230px)}.layout-mat-sidenav-container-mobile[_ngcontent-%COMP%]{height:calc(100vh - 214px)}[_nghost-%COMP%]     mat-sidenav-content{overflow-x:hidden}[_nghost-%COMP%]     .td-data-table-scrollable{-ms-overflow-style:none;scrollbar-width:none}[_nghost-%COMP%]     .td-data-table-scrollable::-webkit-scrollbar{display:none}"]}),e})();const B=[{path:"",component:r,children:[{path:"",component:k},{path:":id",component:k}]}];let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.Bz.forChild(B)],o.Bz]}),e})();var N=n(71650),Q=n(23017),D=n(12522),Y=n(51095),L=n(76627),P=n(88030),E=n(37406),H=n(91233),K=n(84962),j=n(98295),z=n(49983),R=n(3679),G=n(12073);function $(e,t){1&e&&(s.TgZ(0,"mat-hint",21),s._uU(1,"El campo es requerido\n    "),s.qZA())}function X(e,t){if(1&e&&s._UZ(0,"img",22),2&e){const e=s.oxw();s.Q6J("src",e.authorService.model.cover,s.LSH)}}function V(e,t){1&e&&(s.TgZ(0,"mat-hint",21),s._uU(1,"El campo es requerido\n    "),s.qZA())}function W(e,t){1&e&&(s.TgZ(0,"mat-hint",21),s._uU(1,"El campo es requerido\n    "),s.qZA())}const ee=function(e){return[e]},te=function(){return[]},ne=function(){return["name"]},ae=function(){return["name","birth_date"]};let oe=(()=>{class e{constructor(e,t,n,a){this.authorService=e,this.fileUploadService=t,this.snackBar=n,this.api=a,this.disabled=!1,this.hour="23:45:08",this.editor=new E.ML}ngOnInit(){}ngOnDestroy(){this.editor.destroy()}selectEvent(e){if(e instanceof FileList);else{let t=new FormData;t.set("file",e),this.api.post("/api/uploads",t).subscribe(e=>{this.authorService.model.cover=e.data.url,this.snackBar.success(e.message)},e=>{this.snackBar.warning(e.errors.file[0])})}}uploadEvent(e){FileList}cancelEvent(){}setAuthors(e){this.authorService.model.authors||(this.authorService.model.authors=[]),this.authorService.model.authors=e}setAuthorIds(e){this.authorService.model.author_ids||(this.authorService.model.author_ids=[]),this.authorService.model.author_ids=e}setTags(e){this.authorService.model.tags||(this.authorService.model.tags=[]),this.authorService.model.tags=e}setTagIds(e){this.authorService.model.tag_ids||(this.authorService.model.tag_ids=[]),this.authorService.model.tag_ids=e}setGenreId(e){this.authorService.model.genre_id=e[0]}setGenre(e){this.authorService.model.genre=e[0]}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(p),s.Y36(H.fl),s.Y36(K.c),s.Y36(i.O))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-covalent-authors-form"]],decls:81,vars:70,consts:[["flex","",1,"pad"],["appearance","outline",2,"width","100%"],["matInput","","type","text","placeholder","T\xedtulo del libro","required","",3,"ngModel","ngModelChange"],["title","ngModel"],["class","error",4,"ngIf"],["matInput","","type","text","placeholder","C\xf3digo del libro",3,"ngModel","readonly","ngModelChange"],["code","ngModel"],[2,"margin-top","0","margin-bottom","0.5rem"],[1,"NgxEditor__Wrapper",2,"margin-bottom","1rem"],[3,"editor"],["required","",3,"editor","ngModel","disabled","placeholder","ngModelChange"],["resume","ngModel"],["matPrefix","","style","max-height: 32px; max-width: 32px; margin-right: 0.5rem;",3,"src",4,"ngIf"],["matInput","","type","text","placeholder","Im\xe1gen para la cubierta del libro","required","",3,"ngModel","ngModelChange"],["cover","ngModel"],["matSuffix","","color","primary","accept",".jpg,.png",3,"ngModel","disabled","multiple","ngModelChange","select"],["matInput","","type","date","required","",3,"ngModel","ngModelChange"],["published_at","ngModel"],["matInput","","type","datetime-local","placeholder","Seleccione una fecha",3,"ngModel","disabled","ngModelChange"],[3,"label","min","max","required","searchInputLabel","searchInputPlaceholder","selected","selectedIds","searchUrl","searchDisplayColumns","searchColumns","notFoundUrl","notFoundButtonText","notFoundMessage"],[3,"label","searchInputLabel","searchInputPlaceholder","selected","selectedIds","searchUrl","searchDisplayColumns","searchColumns","notFoundUrl","notFoundButtonText","notFoundMessage","selectOut","selectIdsOut"],[1,"error"],["matPrefix","",2,"max-height","32px","max-width","32px","margin-right","0.5rem",3,"src"]],template:function(e,t){if(1&e&&(s.TgZ(0,"div",0),s._uU(1,"\n\n  "),s.TgZ(2,"mat-form-field",1),s._uU(3,"\n    "),s.TgZ(4,"mat-label"),s._uU(5,"T\xedtulo"),s.qZA(),s._uU(6,"\n    "),s.TgZ(7,"input",2,3),s.NdJ("ngModelChange",function(e){return t.authorService.model.title=e}),s.qZA(),s._uU(9,"\n    "),s.YNc(10,$,2,0,"mat-hint",4),s._uU(11,"\n  "),s.qZA(),s._uU(12,"\n\n  "),s.TgZ(13,"mat-form-field",1),s._uU(14,"\n    "),s.TgZ(15,"mat-label"),s._uU(16,"C\xf3digo"),s.qZA(),s._uU(17,"\n    "),s.TgZ(18,"input",5,6),s.NdJ("ngModelChange",function(e){return t.authorService.model.code=e}),s.qZA(),s._uU(20,"\n  "),s.qZA(),s._uU(21,"\n\n  "),s.TgZ(22,"h4",7),s._uU(23,"Res\xfamen"),s.qZA(),s._uU(24,"\n  "),s.TgZ(25,"div",8),s._uU(26,"\n    "),s._UZ(27,"ngx-editor-menu",9),s._uU(28,"\n    "),s.TgZ(29,"ngx-editor",10,11),s.NdJ("ngModelChange",function(e){return t.authorService.model.resume=e}),s.qZA(),s._uU(31,"\n  "),s.qZA(),s._uU(32,"\n\n  "),s.TgZ(33,"mat-form-field",1),s._uU(34,"\n    "),s.TgZ(35,"mat-label"),s._uU(36,"Cubierta"),s.qZA(),s._uU(37,"\n    "),s.YNc(38,X,1,1,"img",12),s._uU(39,"\n    "),s.TgZ(40,"input",13,14),s.NdJ("ngModelChange",function(e){return t.authorService.model.cover=e}),s.qZA(),s._uU(42,"\n    "),s.TgZ(43,"td-file-input",15),s.NdJ("ngModelChange",function(e){return t.files=e})("select",function(e){return t.selectEvent(e)}),s._uU(44,"\n      "),s.TgZ(45,"mat-icon"),s._uU(46,"attach_file"),s.qZA(),s._uU(47,"\n    "),s.qZA(),s._uU(48,"\n    "),s.YNc(49,V,2,0,"mat-hint",4),s._uU(50,"\n  "),s.qZA(),s._uU(51,"\n\n  "),s.TgZ(52,"mat-form-field",1),s._uU(53,"\n    "),s.TgZ(54,"mat-label"),s._uU(55,"Publicado en"),s.qZA(),s._uU(56,"\n    "),s.TgZ(57,"input",16,17),s.NdJ("ngModelChange",function(e){return t.authorService.model.published_at=e}),s.qZA(),s._uU(59,"\n    "),s.YNc(60,W,2,0,"mat-hint",4),s._uU(61,"\n  "),s.qZA(),s._uU(62,"\n\n  "),s.TgZ(63,"mat-form-field",1),s._uU(64,"\n    "),s.TgZ(65,"mat-label"),s._uU(66,"Comprado en"),s.qZA(),s._uU(67,"\n    "),s.TgZ(68,"input",18),s.NdJ("ngModelChange",function(e){return t.authorService.model.bought_at=e}),s.qZA(),s._uU(69,"\n  "),s.qZA(),s._uU(70,"\n  "),s.TgZ(71,"div"),s._uU(72),s.qZA(),s._uU(73,"\n\n  "),s._UZ(74,"app-belongs-to-many-input",19),s._uU(75,"\n\n  "),s.TgZ(76,"app-belongs-to-many-input",20),s.NdJ("selectOut",function(e){return t.setAuthors(e)})("selectIdsOut",function(e){return t.setAuthorIds(e)}),s.qZA(),s._uU(77,"\n\n  "),s.TgZ(78,"app-belongs-to-many-input",20),s.NdJ("selectOut",function(e){return t.setAuthors(e)})("selectIdsOut",function(e){return t.setAuthorIds(e)}),s.qZA(),s._uU(79,"\n\n"),s.qZA(),s._uU(80,"\n")),2&e){const e=s.MAs(8),n=s.MAs(41),a=s.MAs(58);let o,r;s.xp6(7),s.Q6J("ngModel",t.authorService.model.title),s.xp6(3),s.Q6J("ngIf",e.hasError("required")),s.xp6(8),s.Q6J("ngModel",t.authorService.model.code)("readonly",!0),s.xp6(9),s.Q6J("editor",t.editor),s.xp6(2),s.Q6J("editor",t.editor)("ngModel",t.authorService.model.resume)("disabled",!1)("placeholder","Type here..."),s.xp6(9),s.Q6J("ngIf",t.authorService.model.cover),s.xp6(2),s.Q6J("ngModel",t.authorService.model.cover),s.xp6(3),s.Q6J("ngModel",t.files)("disabled",t.disabled)("multiple",!1),s.xp6(6),s.Q6J("ngIf",n.hasError("required")),s.xp6(8),s.Q6J("ngModel",t.authorService.model.published_at),s.xp6(3),s.Q6J("ngIf",a.hasError("required")),s.xp6(8),s.Q6J("ngModel",t.authorService.model.bought_at)("disabled",!1),s.xp6(4),s.Oqu(t.authorService.model.bought_at),s.xp6(2),s.Q6J("label","Genero")("min",1)("max",1)("required",!0)("searchInputLabel","Agregar Genero")("searchInputPlaceholder","Busca el nombre del genero")("selected",t.authorService.model.genre?s.VKq(56,ee,t.authorService.model.genre):s.DdM(58,te))("selectedIds",t.authorService.model.genre?s.VKq(59,ee,t.authorService.model.genre.id):s.DdM(61,te))("searchUrl","api/genres")("searchDisplayColumns",s.DdM(62,ne))("searchColumns",s.DdM(63,ne))("notFoundUrl","/covalent/genres/0")("notFoundButtonText","Crear genero")("notFoundMessage","No se encontraron generos"),s.xp6(2),s.Q6J("label","Autores")("searchInputLabel","Agregar Autores")("searchInputPlaceholder","Busca el nombre o la fecha de nacimiento el autor")("selected",null!==(o=t.authorService.model.authors)&&void 0!==o?o:s.DdM(64,te))("selectedIds",null!==(r=t.authorService.model.author_ids)&&void 0!==r?r:s.DdM(65,te))("searchUrl","api/authors")("searchDisplayColumns",s.DdM(66,ne))("searchColumns",s.DdM(67,ae))("notFoundUrl","/covalent/authors/0")("notFoundButtonText","Crear autor")("notFoundMessage","No se encontraron autores"),s.xp6(2),s.Q6J("label","Etiquetas")("searchInputLabel","Agregar etiquetas")("searchInputPlaceholder","Busca el nombre de la etiqueta")("selected",t.authorService.model.tags)("selectedIds",t.authorService.model.tag_ids)("searchUrl","api/tags")("searchDisplayColumns",s.DdM(68,ne))("searchColumns",s.DdM(69,ne))("notFoundUrl","/covalent/tags/0")("notFoundButtonText","Crear etiqueta")("notFoundMessage","No se encontraron etiquetas")}},directives:[j.KE,j.hX,z.Nt,R.Fj,R.Q7,R.JJ,R.On,a.O5,E.Mn,E.tP,H.xe,j.R9,L.Hw,G.l,j.bx,j.qo],styles:["[_nghost-%COMP%]     .theme-dark .td-file-input{background-color:initial!important;box-shadow:none!important;font-size:1rem}[_nghost-%COMP%]     .mat-card-image{border-top-left-radius:16px!important;border-top-right-radius:16px!important}[_nghost-%COMP%]     .td-file-input{background-color:initial;box-shadow:none;font-size:1rem}"]}),e})();const se=["sidenav"],re=function(e){return{marginTop:e}};let ie=(()=>{class e{constructor(e,t){this.layoutService=e,this.authorsListComponent=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(c.W),s.Y36(k))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-covalent-authors-sidenav"]],viewQuery:function(e,t){if(1&e&&s.Gf(se,5),2&e){let e;s.iGM(e=s.CRH())&&(t.sidenav=e.first)}},decls:22,vars:5,consts:[["mode","over","position","end",2,"width","100%",3,"disableClose"],["sidenav",""],["layout","column","layout-fill",""],[2,"position","fixed"],["mat-icon-button","",3,"click"],["flex","",1,"mat-content",3,"ngStyle"]],template:function(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-sidenav",0,1),s._uU(2,"\n  "),s.TgZ(3,"div",2),s._uU(4,"\n    "),s.TgZ(5,"mat-toolbar",3),s._uU(6,"\n      "),s.TgZ(7,"button",4),s.NdJ("click",function(){s.CHM(e);const n=s.MAs(1);return t.authorsListComponent.router.navigateByUrl("/covalent/authors"),n.close(),t.authorsListComponent.authorService.model={}}),s._uU(8,"\n        "),s.TgZ(9,"mat-icon"),s._uU(10,"close"),s.qZA(),s._uU(11,"\n      "),s.qZA(),s._uU(12),s.qZA(),s._uU(13,"\n    "),s.TgZ(14,"div",5),s._uU(15,"\n      "),s._UZ(16,"app-covalent-authors-form"),s._uU(17,"\n      "),s._uU(18,"\n    "),s.qZA(),s._uU(19,"\n  "),s.qZA(),s._uU(20,"\n"),s.qZA(),s._uU(21,"\n")}2&e&&(s.Q6J("disableClose",!0),s.xp6(12),s.hij("\n      ",t.authorsListComponent.authorService.model.id?"Editar Autor":"Crear autor","\n    "),s.xp6(2),s.Q6J("ngStyle",s.VKq(3,re,t.layoutService.isMobile?"56px":"64px")))},directives:[Q.JX,D.Ye,Y.lW,L.Hw,a.PC,P.Zl,oe],styles:["[_nghost-%COMP%]     mat-sidenav-content{overflow-x:hidden}"]}),e})();var le=n(46941),ue=n(1769),ce=n(92859),de=n(77746),he=n(85873),ge=n(67441),me=n(72458);let pe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[a.ez,N.m8,F]]}),e})();s.B6R(k,[Q.TM,ie,a.O5,Y.lW,le.K_,a.PC,P.Zl,ue.d,d.vn,a.mk,P.oO,R.JJ,R.On,d.Cp,a.sg,ce.YI,o.rH,L.Hw,de.eA,he.S,ge.gD,me.ey],[a.uU])}}]);